{% assign item = include.item %}

<style>
    .pub-item {
        padding: 1rem 0;
        border-bottom: 1px solid #f1f3f5;
        transition: background 0.2s;
    }
    .pub-item:last-child { border-bottom: none; }
    
    .pub-thumb {
        width: 100%;
        max-width: 220px; /* 限制图片最大宽度，更紧凑 */
        border-radius: 6px;
        border: 1px solid #e9ecef;
        box-shadow: 0 2px 5px rgba(0,0,0,0.03);
    }
    
    .pub-title { font-size: 1.05rem; font-weight: 700; color: var(--text-main); line-height: 1.3; margin-bottom: 0.4rem; }
    .pub-authors { font-size: 0.95rem; color: var(--text-secondary); margin-bottom: 0.4rem; }
    .pub-venue { font-size: 0.9rem; color: var(--text-muted); font-style: italic; margin-bottom: 0.6rem; }
    
    .badge-link {
        display: inline-block;
        padding: 2px 8px;
        margin-right: 6px;
        margin-bottom: 4px;
        font-size: 0.75rem;
        font-weight: 600;
        color: var(--primary-color);
        background: rgba(0, 123, 255, 0.08);
        border-radius: 12px;
        text-decoration: none;
        transition: all 0.2s;
    }
    .badge-link:hover {
        background: var(--primary-color);
        color: #fff;
    }
</style>

<div class="pub-item">
    <div class="row">
        <!-- Thumbnail: PC/Pad -->
        <div class="col-md-3 d-none d-md-block">
            {% if item.cover %}
            <img data-src="{{ item.cover | relative_url }}" class="lazy pub-thumb" src="{{ '/assets/images/loading.gif' | relative_url }}">
            {% else %}
            <div class="pub-thumb bg-light d-flex align-items-center justify-content-center text-muted" style="height: 120px;">
                <i class="fas fa-image fa-2x"></i>
            </div>
            {% endif %}
        </div>

        <!-- Content -->
        <div class="col-12 col-md-9 pl-md-4">
            <h5 class="pub-title">{{ item.title }}</h5>
            
            <div class="pub-authors">
                {% include widgets/author_list.html authors=item.authors %}
            </div>
            
            <div class="pub-venue">
                {{ item.pub_pre }} <strong>{{ item.pub }}</strong> {{ item.pub_post }}
                {% if item.pub_date %}({{ item.pub_date }}){% endif %}
            </div>
            
            <!-- Mobile Thumbnail (Optional: show narrow banner or hide) -->
            {% if item.cover %}
            <div class="d-md-none mb-3">
                 <img data-src="{{ item.cover | relative_url }}" class="lazy w-100 rounded border" src="{{ '/assets/images/loading.gif' | relative_url }}">
            </div>
            {% endif %}

            <!-- Links -->
            <div class="mt-2">
                {% for link in item.links %}
                    {% if link[1].url %}
                        <a class="badge-link" target="{{ link[1]['target'] }}" href="{{ link[1]['url'] }}">{{ link[0] }}</a>
                    {% else %}
                        <a class="badge-link" target="_blank" href="{{ link[1] }}">{{ link[0] }}</a>
                    {% endif %}
                {% endfor %}
            </div>
        </div>
    </div>
</div>